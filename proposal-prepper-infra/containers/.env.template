# SPDX-License-Identifier: PolyForm-Perimeter-1.0.0
# SPDX-FileCopyrightText: 2025 Seventeen Sierra LLC

# Docker Compose Environment Configuration Template
# Copy this file to .env and customize for your deployment

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Environment type: development, staging, production
ENVIRONMENT=development

# Compose project name (affects container and network names)
COMPOSE_PROJECT_NAME=proposal-prepper

# =============================================================================
# WEB SERVICE CONFIGURATION
# =============================================================================

# Node.js environment
NODE_ENV=development
NEXT_TELEMETRY_DISABLED=1

# Web service debugging
DEBUG=true
LOG_LEVEL=debug

# =============================================================================
# STRANDS SERVICE CONFIGURATION  
# =============================================================================

# Python environment
PYTHON_ENV=development
PYTHONUNBUFFERED=1

# Strands service configuration
STRANDS_LOG_LEVEL=INFO
STRANDS_LOG_TO_FILE=false
MAX_CONCURRENT_ANALYSES=5
ANALYSIS_TIMEOUT_SECONDS=300

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL configuration
POSTGRES_DB=proposal_prepper
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
DATABASE_URL=postgresql://postgres:password@postgres:5432/proposal_prepper

# Database initialization
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=C --lc-ctype=C

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection
REDIS_URL=redis://redis:6379/0

# Redis memory configuration (for production)
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# =============================================================================
# MINIO/S3 CONFIGURATION
# =============================================================================

# MinIO credentials
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# S3 configuration for services
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=documents

# MinIO console URL (for production)
MINIO_BROWSER_URL=http://localhost:9001

# Legacy environment variables (for backward compatibility)
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=proposal-documents

# =============================================================================
# AWS CONFIGURATION
# =============================================================================

# AWS region for Bedrock services
AWS_REGION=us-east-1
AWS_BEDROCK_REGION=us-east-1

# AWS credentials (set these for real AI analysis)
# Leave empty to use fallback mock analysis
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# Bedrock model configuration
BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20240229-v1:0

# =============================================================================
# SERVICE DISCOVERY
# =============================================================================

# Internal service URLs (used by services to communicate)
WEB_SERVICE_URL=http://web:3000
STRANDS_SERVICE_URL=http://strands:8080

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT secret (generate a secure random string for production)
JWT_SECRET=your-jwt-secret-here

# API rate limiting
API_RATE_LIMIT=100
API_RATE_WINDOW=900

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Health check configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Log levels: DEBUG, INFO, WARN, ERROR
GLOBAL_LOG_LEVEL=INFO

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================

# Hot reload configuration (development only)
WATCHPACK_POLLING=true
CHOKIDAR_USEPOLLING=true
WATCHFILES_FORCE_POLLING=true
FAST_REFRESH=true

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================

# Resource limits (uncomment for production)
# WEB_MEMORY_LIMIT=1G
# WEB_CPU_LIMIT=1.0
# STRANDS_MEMORY_LIMIT=2G
# STRANDS_CPU_LIMIT=2.0
# POSTGRES_MEMORY_LIMIT=1G
# POSTGRES_CPU_LIMIT=1.0

# =============================================================================
# DATA PERSISTENCE CONFIGURATION
# =============================================================================

# Volume naming (affects Docker volume names)
COMPOSE_PROJECT_NAME=proposal-prepper

# Data backup configuration
ENABLE_AUTOMATED_BACKUPS=false
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# Volume paths (for bind mounts in production)
# POSTGRES_DATA_PATH=/var/lib/proposal-prepper/postgres
# MINIO_DATA_PATH=/var/lib/proposal-prepper/minio  
# REDIS_DATA_PATH=/var/lib/proposal-prepper/redis

# =============================================================================
# SEED DATA CONFIGURATION
# =============================================================================

# Path to seed data (mounted as volume)
SEED_DATA_PATH=/app/src/seed-data

# Seed data configuration
ENABLE_AUTO_SEEDING=true
FORCE_RESEED_ON_STARTUP=false